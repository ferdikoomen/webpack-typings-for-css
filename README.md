# Webpack Typings for CSS loader

[![NPM](https://badgen.net/npm/v/webpack-typings-for-css)](https://www.npmjs.com/package/webpack-typings-for-css)
[![License](https://badgen.net/npm/license/webpack-typings-for-css)](https://www.npmjs.com/package/webpack-typings-for-css)
[![Build Status](https://badgen.net/travis/ferdikoomen/webpack-typings-for-css/master)](https://travis-ci.org/ferdikoomen/webpack-typings-for-css)
[![Quality](https://badgen.net/lgtm/grade/javascript/g/ferdikoomen/webpack-typings-for-css)](https://lgtm.com/projects/g/ferdikoomen/webpack-typings-for-css)

> Webpack loader that generates TypeScript typings for CSS modules

## Installation

```
npm install webpack-typings-for-css --save-dev
```

**webpack.config.js**

```javascript
module.exports = {
    module: {
        rules: [{
            test: /\.css$/,
            use: [{
                loader: 'style-loader'
            }, {
                loader: 'webpack-typings-for-css'
            }, {
                loader: 'css-loader',
                options: {
                    localsConvention: 'camelCaseOnly',
                    modules: {
                        localIdentName: '[name]__[local]__[hash:base64]'
                    }
                }
            }]
        }]
    }
};
```

## Example

Let's say we are building a simple React button component. And we have this file:
`./src/button/style.scss` in our project with the following content:

```scss
.button {
    color: black;
    background: white;
    font-size: 12px;
    padding: 10px;

    &--small {
        padding: 5px;
        font-size: 10px;
    }

    &--large {
        padding: 20px;
        font-size: 14px;
    }
}
```

When we add the `webpack-typings-for-css` loader, this will generate a TypeScript 
definition file `./src/button/style.scss.d.ts` with the following content:

```typescript
interface ClassNames {
    readonly button: string;
    readonly buttonSmall: string;
    readonly buttonLarge: string;
}
declare const styles: ClassNames;
export default styles;
```

In your Typescript file you will now be able to import this file and get type hints 
with the available classNames. The values for these properties are the final classNames
that are generated by the css-loader. In our example they are hashed:

```typescript
import styles from './styles.scss';

console.log(styles.button); // styles__button__wzc-BjG34gg0YTmmp71Mh
console.log(styles.buttonSmall); // styles__button--small__Jl0thjpdKMgQgK4SczMV_
console.log(styles.buttonLarge); // styles__button--large__2vSRkXkjXTxZOTMAbhDH_n
```

In your (React) button component you can now use the same import and use these readable
type checked classNames to style your components!

```typescript jsx
import * as React from 'react';

import styles from './styles.scss';

export const Button = () => (
    <button className={styles.button}>Hello World!</button>
);
```

## Known issues

As the loader generates typing files, it is wise to tell webpack to ignore them.
The fix is luckily very simple. Webpack ships with a "WatchIgnorePlugin" out of the box.
Simply add this to your webpack plugins:

```javascript
plugins: [
    new webpack.WatchIgnorePlugin([
        /css\.d\.ts$/
    ]),
    ...
]
```

You might see project warnings when you have not yet build the project. This happens
because Typescript cannot import SCSS, LESS or CSS files (since they are not official
modules). In order to fix this you can add a type definition to your project. You can
find the common examples in the `typings` folder of this project. 

Let's say your project uses SCSS files for styling then add the following file
to your project:

**./typings/scss.d.ts**
```typescript
declare module '*.scss' {

    interface ClassNames {
        readonly [className: string]: string;
    }

    declare const styles: ClassNames;

    export default styles;
}
```

**tsconfig.json**
```json
{
    ...
    "files": [
        "./typings/scss.d.ts"
    ],
    ...
}
```
